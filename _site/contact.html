<!DOCTYPE html>
<html lang="en-US"><head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta charset="utf-8">
  <title>Contact Me - Jordan Lagan</title>
  <link rel="icon" type="image/png" href="/favicon.png">
  <link rel="stylesheet" href="/assets/css/main.css">

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-L35VSMBBVT"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-L35VSMBBVT');
  </script>
</head><body><div class="header">
  <h1><a href="/">Jordan Lagan</a></h1>
  <nav>
    <a class="button" href="/">Blog</a>
    <a class="button" href="/about">About me</a>
    <a class="button" href="/projects">Projects</a>
    <a class="button" href="/contact">Contact</a>
    <a class="button hire-me-nav" href="/hire-me">Hire Me</a>
  </nav>
</div>
<div class="mini-hero">
  <h2>"Programmer: An entity that consumes coffee and produces code"</h2>
</div><div class="main-content-container">
      <div class="main-content">
        <div class="text-background p-2 rounded element-shadow">
<h1>Contact me</h1>
  <div class="contact-form">
    <p>Can't wait to hear from you. I will respond as soon as I can.</p>
    <form action="/submit_form" method="POST" id="contact-form">
      <!-- Multiple hidden honeypot fields with different names -->
      <div style="position: absolute; left: -9999px; opacity: 0; pointer-events: none;">
        <input type="text" name="honeypot" tabindex="-1" autocomplete="off">
        <input type="email" name="email_confirm" tabindex="-1" autocomplete="off">
        <input type="text" name="website_url" tabindex="-1" autocomplete="off">
        <input type="text" name="company_name" tabindex="-1" autocomplete="off">
        <input type="tel" name="phone_number" tabindex="-1" autocomplete="off">
      </div>

      <!-- Time-based protection (form must be open for at least 3 seconds) -->
      <input type="hidden" name="form_load_time" id="form-load-time">
      
      <!-- Session token for CSRF protection -->
      <input type="hidden" name="session_token" id="session-token">

      <div class="form-row">
        <div class="form-element">
          <label for="inquiry_type">Inquiry Type:</label>
          <select id="inquiry_type" name="inquiry_type" required>
            <option value="project">I need help with a project</option>
            <option value="general">I have a question</option>
            <option value="personal">Just saying hello</option>
            <option value="other">Other</option>
          </select>
        </div>
  
        <div class="form-element">
          <label for="website">Website:</label>
          <input type="url" id="website" name="website">
        </div>
      </div>
      

      <div class="form-row mt-2">
        <div class="form-element">
          <label for="name">Name:</label>
          <input type="text" id="name" name="name" required minlength="2" maxlength="100">
        </div>

        <div class="form-element">
          <label for="email">Email:</label>
          <input type="email" id="email" name="email" required>
        </div>
      </div>

      <div class="form-element mt-3">
        <label for="message">Message:</label>
        <textarea id="message" name="message" required minlength="10" maxlength="2000" placeholder="Please describe your project or question in detail..."></textarea>
      </div>

      <!-- Enhanced CAPTCHA with multiple question types -->
      <div class="form-element mt-3">
        <label for="captcha">Security Question: <span id="captcha-question"></span></label>
        <input type="text" id="captcha" name="captcha" required autocomplete="off">
        <input type="hidden" id="captcha-answer" name="captcha_answer">
      </div>

      <!-- reCAPTCHA placeholder (you'll need to add your site key) -->
      <div class="form-element mt-3">
        <div class="g-recaptcha" data-sitekey="YOUR_RECAPTCHA_SITE_KEY"></div>
      </div>

      <button class="contact-submit-btn mt-3" type="submit" id="submit-btn" disabled>
        <span class="btn-text">Send Message</span>
        <span class="btn-loading" style="display: none;">Sending...</span>
      </button>
    </form>
  </div>

</div>

<script>
  // Anti-spam protection system
  let formLoadTime;
  let userInteracted = false;
  let keypressCount = 0;
  
  // Generate enhanced CAPTCHA with multiple question types
  function generateCaptcha() {
    const captchaTypes = [
      // Math questions
      () => {
        const num1 = Math.floor(Math.random() * 10) + 1;
        const num2 = Math.floor(Math.random() * 10) + 1;
        const operations = ['+', '-', '×'];
        const op = operations[Math.floor(Math.random() * operations.length)];
        let answer;
        let question;
        
        if (op === '+') {
          answer = num1 + num2;
          question = `${num1} + ${num2}`;
        } else if (op === '-') {
          const larger = Math.max(num1, num2);
          const smaller = Math.min(num1, num2);
          answer = larger - smaller;
          question = `${larger} - ${smaller}`;
        } else {
          answer = num1 * num2;
          question = `${num1} × ${num2}`;
        }
        
        return { question, answer: answer.toString() };
      },
      
      // Word questions
      () => {
        const questions = [
          { q: "What color is the sky on a clear day?", a: "blue" },
          { q: "How many days are in a week?", a: "7" },
          { q: "What is the opposite of 'hot'?", a: "cold" },
          { q: "What comes after Monday?", a: "tuesday" },
          { q: "What is 2 + 2?", a: "4" }
        ];
        const selected = questions[Math.floor(Math.random() * questions.length)];
        return { question: selected.q, answer: selected.a.toLowerCase() };
      }
    ];
    
    const captchaType = captchaTypes[Math.floor(Math.random() * captchaTypes.length)];
    const { question, answer } = captchaType();
    
    document.getElementById('captcha-question').innerText = question;
    document.getElementById('captcha-answer').value = answer;
  }
  
  // Generate session token
  function generateSessionToken() {
    const token = Math.random().toString(36).substring(2) + Date.now().toString(36);
    document.getElementById('session-token').value = token;
    sessionStorage.setItem('contact_token', token);
  }
  
  // Track user interaction
  function trackUserInteraction(event) {
    if (!userInteracted) {
      userInteracted = true;
      document.getElementById('submit-btn').disabled = false;
    }
    // Add class to show validation styles only after user interaction
    if (event && event.target) {
      event.target.classList.add('user-interacted');
    }
  }
  
  // Track keypress patterns
  function trackKeypress() {
    keypressCount++;
  }
  
  // Form validation and spam detection
  function validateForm(event) {
    const form = event.target;
    const submitBtn = document.getElementById('submit-btn');
    
    // Check if honeypots are filled
    const honeypots = ['honeypot', 'email_confirm', 'website_url', 'company_name', 'phone_number'];
    for (let field of honeypots) {
      if (form[field] && form[field].value.trim() !== '') {
        event.preventDefault();
        alert('Please try again.');
        return false;
      }
    }
    
    // Check minimum time spent on form (must be at least 3 seconds)
    const currentTime = Date.now();
    const timeDiff = (currentTime - formLoadTime) / 1000;
    if (timeDiff < 3) {
      event.preventDefault();
      alert('Please take your time filling out the form.');
      return false;
    }
    
    // Check if user interacted with form
    if (!userInteracted || keypressCount < 5) {
      event.preventDefault();
      alert('Please fill out the form completely.');
      return false;
    }
    
    // Validate CAPTCHA
    const userAnswer = document.getElementById('captcha').value.toLowerCase().trim();
    const correctAnswer = document.getElementById('captcha-answer').value.toLowerCase().trim();
    if (userAnswer !== correctAnswer) {
      event.preventDefault();
      alert('Please solve the security question correctly.');
      generateCaptcha(); // Generate new CAPTCHA
      return false;
    }
    
    // Check session token
    const formToken = document.getElementById('session-token').value;
    const storedToken = sessionStorage.getItem('contact_token');
    if (formToken !== storedToken) {
      event.preventDefault();
      alert('Session expired. Please refresh the page.');
      return false;
    }
    
    // All checks passed - show loading state
    submitBtn.disabled = true;
    submitBtn.querySelector('.btn-text').style.display = 'none';
    submitBtn.querySelector('.btn-loading').style.display = 'inline';
    
    return true;
  }
  
  // Initialize on page load
  document.addEventListener('DOMContentLoaded', function() {
    formLoadTime = Date.now();
    document.getElementById('form-load-time').value = formLoadTime;
    
    generateCaptcha();
    generateSessionToken();
    
    // Check for pre-filled data from services page
    const prefilledMessage = sessionStorage.getItem('prefilledMessage');
    const prefilledInquiry = sessionStorage.getItem('prefilledInquiry');
    
    if (prefilledMessage) {
      document.getElementById('message').value = prefilledMessage;
      sessionStorage.removeItem('prefilledMessage');
    }
    
    if (prefilledInquiry) {
      document.getElementById('inquiry_type').value = prefilledInquiry;
      sessionStorage.removeItem('prefilledInquiry');
    }
    
    // Add interaction listeners
    const form = document.getElementById('contact-form');
    const inputs = form.querySelectorAll('input, textarea, select');
    
    inputs.forEach(input => {
      input.addEventListener('focus', trackUserInteraction);
      input.addEventListener('input', trackUserInteraction);
      input.addEventListener('keypress', trackKeypress);
    });
    
    // Add form submit listener
    form.addEventListener('submit', validateForm);
    
    // Re-enable submit button after user interaction
    setTimeout(() => {
      if (userInteracted) {
        document.getElementById('submit-btn').disabled = false;
      }
    }, 3000);
  });
  
  // Additional protection: detect rapid form submissions
  let lastSubmissionTime = 0;
  document.addEventListener('submit', function(e) {
    const currentTime = Date.now();
    if (currentTime - lastSubmissionTime < 5000) { // 5 second cooldown
      e.preventDefault();
      alert('Please wait before submitting again.');
      return false;
    }
    lastSubmissionTime = currentTime;
  });
</script>

<!-- Load reCAPTCHA (uncomment and add your site key when ready) -->
<!-- <script src="https://www.google.com/recaptcha/api.js" async defer></script> -->

<style>
/* Modern Contact Form Styling */
.contact-form {
  background: rgba(255, 255, 255, 0.95) !important;
  border-radius: 15px !important;
  padding: 40px !important;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1) !important;
  backdrop-filter: blur(20px) !important;
  border: 1px solid rgba(255, 255, 255, 0.2) !important;
}

.contact-form h1 {
  text-align: center;
  margin-bottom: 10px;
  color: #333;
  font-size: 2.2rem;
}

.contact-form > p {
  text-align: center;
  color: #666;
  font-size: 1.1rem;
  margin-bottom: 30px;
  font-style: italic;
}

/* Form Structure */
.contact-form form {
  padding: 0 !important;
}

.form-row {
  display: flex !important;
  gap: 20px !important;
  margin-bottom: 20px !important;
}

.form-element {
  display: flex !important;
  flex-direction: column !important;
  gap: 8px !important;
  width: 100% !important;
}

/* Labels */
.contact-form label {
  font-weight: 600 !important;
  color: #333 !important;
  font-size: 0.95rem !important;
  margin-bottom: 5px !important;
  display: block !important;
  width: auto !important;
}

/* Input Fields */
.contact-form input,
.contact-form textarea,
.contact-form select {
  width: 100% !important;
  padding: 15px 18px !important;
  border: 2px solid #e1e5e9 !important;
  border-radius: 12px !important;
  font-size: 1rem !important;
  background: white !important;
  transition: all 0.3s ease !important;
  box-sizing: border-box !important;
  font-family: inherit !important;
  height: auto !important;
}

.contact-form input:focus,
.contact-form textarea:focus,
.contact-form select:focus {
  border-color: #667eea !important;
  box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.15) !important;
  outline: none !important;
  transform: translateY(-1px) !important;
}

.contact-form input:hover:not(:focus),
.contact-form textarea:hover:not(:focus),
.contact-form select:hover:not(:focus) {
  border-color: #c5c9d0 !important;
}

/* Textarea specific */
.contact-form textarea {
  min-height: 120px !important;
  resize: vertical !important;
  line-height: 1.5 !important;
}

/* Select specific */
.contact-form select {
  cursor: pointer !important;
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e") !important;
  background-position: right 12px center !important;
  background-repeat: no-repeat !important;
  background-size: 16px !important;
  padding-right: 45px !important;
  appearance: none !important;
}

/* CAPTCHA Section */
.form-element:has(#captcha) {
  background: rgba(102, 126, 234, 0.05);
  padding: 20px;
  border-radius: 12px;
  border: 1px solid rgba(102, 126, 234, 0.2);
}

.form-element:has(#captcha) label {
  color: #667eea !important;
  font-weight: 700 !important;
}

#captcha-question {
  font-weight: bold;
  color: #333;
  font-size: 1.1rem;
}

/* reCAPTCHA container */
.g-recaptcha {
  margin: 20px 0;
  display: flex;
  justify-content: center;
}

/* Submit Button */
.contact-submit-btn {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
  color: white !important;
  border: none !important;
  padding: 18px 40px !important;
  border-radius: 50px !important;
  font-weight: bold !important;
  font-size: 1.2rem !important;
  cursor: pointer !important;
  transition: all 0.3s ease !important;
  width: auto !important;
  height: auto !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  min-width: 180px !important;
  margin: 30px auto 0 auto !important;
  display: block !important;
  text-align: center !important;
  box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3) !important;
}

.contact-submit-btn:hover:not(:disabled) {
  transform: translateY(-3px) !important;
  box-shadow: 0 15px 35px rgba(102, 126, 234, 0.4) !important;
}

.contact-submit-btn:disabled {
  opacity: 0.7 !important;
  cursor: not-allowed !important;
  transform: none !important;
  box-shadow: 0 8px 25px rgba(102, 126, 234, 0.2) !important;
}

.contact-submit-btn:active:not(:disabled) {
  transform: translateY(-1px) !important;
}

/* Loading animation */
.btn-loading {
  display: inline-flex;
  align-items: center;
  gap: 10px;
}

.btn-loading::after {
  content: '';
  width: 18px;
  height: 18px;
  border: 2px solid transparent;
  border-top: 2px solid white;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Form validation styles - only show after user interaction */
.contact-form input.user-interacted:invalid:not(:focus),
.contact-form textarea.user-interacted:invalid:not(:focus) {
  border-color: #ef4444 !important;
  box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1) !important;
}

.contact-form input.user-interacted:valid:not(:focus):not(:placeholder-shown),
.contact-form textarea.user-interacted:valid:not(:focus):not(:placeholder-shown) {
  border-color: #10b981 !important;
}

/* Placeholder styling */
.contact-form input::placeholder,
.contact-form textarea::placeholder {
  color: #9ca3af !important;
  font-style: italic !important;
}

/* Responsive Design */
@media (max-width: 768px) {
  .contact-form {
    padding: 25px !important;
    margin: 10px !important;
  }
  
  .form-row {
    flex-direction: column !important;
    gap: 15px !important;
  }
  
  .contact-form input,
  .contact-form textarea,
  .contact-form select {
    padding: 12px 15px !important;
  }
  
  .contact-submit-btn {
    width: 100% !important;
    padding: 16px 24px !important;
    font-size: 1.1rem !important;
  }
  
  .contact-form h1 {
    font-size: 1.8rem;
  }
  
  .contact-form > p {
    font-size: 1rem;
  }
}

@media (max-width: 480px) {
  .contact-form {
    padding: 20px !important;
  }
  
  .form-element:has(#captcha) {
    padding: 15px;
  }
}

/* Animation for form elements */
.form-element {
  animation: slideUp 0.6s ease forwards;
  opacity: 0;
  transform: translateY(20px);
}

.form-element:nth-child(1) { animation-delay: 0.1s; }
.form-element:nth-child(2) { animation-delay: 0.2s; }
.form-element:nth-child(3) { animation-delay: 0.3s; }
.form-element:nth-child(4) { animation-delay: 0.4s; }
.form-element:nth-child(5) { animation-delay: 0.5s; }
.form-element:nth-child(6) { animation-delay: 0.6s; }

@keyframes slideUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Override any conflicting base styles */
.contact-form * {
  box-sizing: border-box !important;
}
</style>
      </div>
    </div>
  </body>
</html>
